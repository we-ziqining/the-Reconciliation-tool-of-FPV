# FPV 采集数据处理项目

本项目用于处理 FPV 数据采集流程中的多表格数据归并与处理，涵盖忍者表数据初步合并、标准化、QA汇总以及审批状态标记，全流程自动化。

## 目录结构与功能说明

- `step1_gather.py`  
  合并四个采集人（罗圣峰/陈晨/贺子豪/江伊潭）的原始表格，标准化字段并输出统一结果文件 `Ninja.csv`。

- `step2_merge.py`  
  读取标准化采集数据 (`Ninja.csv`) 与 QA 检查结果 (`QA.csv`)，完成校对、单位标准化（分钟转小时）、不合格统计、差异计算等，输出汇总结果 `all.csv` 及清洗对照表 `数据清洗对照表.csv`。

- `step3_tag.py`  
  根据 QA 表格中的审批状态，将 `all.csv` 的每一条数据标记为“待审批”或留空，输出最终结果 `result.csv`。

## 运行流程

1. 准备好四份个人采集原始表（1.csv, 2.csv, 3.csv, 4.csv），以及 QA 检查表 (`QA.csv`)。
2. 依次运行三步脚本：

   ```shell
   python step1_gather.py
   # 得到 Ninja.csv

   python step2_merge.py
   # 得到 all.csv 和 数据清洗对照表.csv

   python step3_tag.py
   # 得到 result.csv
   ```

   每步运行完毕后会在终端输出简要摘要与字段预览。

## 输出文件说明

- `Ninja.csv`  
  4人采集数据的标准化合并结果。

- `all.csv`  
  与 QA 数据汇总、转换以及对比后的总表，含所有重要分析字段。

- `result.csv`  
  在 `all.csv` 基础上根据 QA 审批状态打标签的最终成果表。

- `数据清洗对照表.csv`  
  对日期和设备 ID 清洗过程的详细记录与异常追踪。

## 主要字段说明

- `采集日期`、`设备ID`、`采集点`、`采集点对接人`
- `日报截屏上送时长（小时）`  
  采集人自行上送日报截图的时长，单位小时

- `原始上送时长（小时/分钟）`  
  QA 检查表中原始采集时长，单位已标准化为小时/分钟

- `运营端不合格时长（小时/分钟）`  
  QA 检查表，运营端审核判定不合格的数据时长

- `不合格时长占比`  
  `运营端不合格时长 / 原始上送时长` 的百分比

- `数据记录差异`  
  `原始上送时长 - 日报截屏上送时长`，衡量数据分歧

- `审批状态`  
  由 `step3_tag.py` 自动标记，“待审批”或留空

## 注意事项

- 输入数据需为 UTF-8 或 GBK 编码 CSV 文件
- python 环境需要 `pandas`、`numpy` 包
- 清洗和标准化环节充分考虑了日期格式与设备编号的异常，请关注 `数据清洗对照表.csv` 提供的异常记录

## 更新日志

- 采集点对接人取自“忍者”列（非采集者）
- QA 时长已实现分钟→小时自动转换
- 自动校对采集与 QA 不一致的数据并输出差异
- 所有结果字段顺序按最终格式排列
- 审批状态打标自动完成

----

如遇特殊数据情况或脚本异常，建议结合对照表人工追查；如需功能定制请补充需求。
